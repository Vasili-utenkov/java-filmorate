DROP TABLE IF EXISTS MPA CASCADE;
CREATE TABLE MPA (
   id  INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
   name varchar(255) NOT NULL
    );

DROP TABLE IF EXISTS Users CASCADE;
CREATE TABLE Users (
    id  INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name varchar(255) NOT NULL,
    birthday date NOT NULL,
    email varchar(255) NOT NULL,
    login varchar(255) NOT NULL
    );

DROP TABLE IF EXISTS Friend CASCADE;
CREATE TABLE Friend (
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    sideOne int REFERENCES Users(id),
    sideTwo int REFERENCES Users(id),
    isConfirm boolean  DEFAULT false NOT NULL
);

DROP TABLE IF EXISTS Film CASCADE;
CREATE TABLE Film (
    id  INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name varchar(255) NOT NULL,
    description varchar(255) NOT NULL,
    releaseDate date NOT NULL,
    duration int NOT NULL,
    mpaID int REFERENCES MPA(id)
    );

DROP TABLE IF EXISTS Likes CASCADE;
CREATE TABLE Likes (
    id  INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    userID int REFERENCES Users(id),
    filmID int REFERENCES Film(id)
);

DROP TABLE IF EXISTS Genre CASCADE;
CREATE TABLE Genre (
    id  INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name varchar(255) NOT NULL
    );

DROP TABLE IF EXISTS FilmGenre CASCADE;
CREATE TABLE FilmGenre (
    id  INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    filmID int REFERENCES Film(id),
    genreID int REFERENCES Genre(id)
);

